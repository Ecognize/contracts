%
% Copyright 2016 Erint Labs OÜ
%
% Licensed under the EUPL, Version 1.1 or – as soon they
% will be approved by the European Commission - subsequent
% versions of the EUPL (the "Licence");
% You may not use this work except in compliance with the
% Licence.
% You may obtain a copy of the Licence at:
%
% https://joinup.ec.europa.eu/software/page/eupl
%
% Unless required by applicable law or agreed to in
% writing, software distributed under the Licence is
% distributed on an "AS IS" basis,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
% express or implied.
% See the Licence for the specific language governing
% permissions and limitations under the Licence.
%
\documentclass[a4paper]{article}
\usepackage[landscape,top=1cm, bottom=1.5cm, left=1cm, right=1cm]{geometry}
% TODO: non XeLaTeX compliation support
\usepackage[colorlinks]{hyperref}
\usepackage{paracol}
\usepackage{fancyref}
\usepackage{fontspec}
\usepackage{xltxtra}
\usepackage{ifthen}
\usepackage{multirow}
\usepackage{xunicode}
\XeTeXinputencoding utf8
\usepackage{polyglossia}
\setdefaultlanguage{ukrainian}
\setotherlanguages{english,estonian}
\setromanfont[Mapping=tex-text]{Linux Libertine}

% TODO: remove color borders maybe?
% TODO: better document class?
% TODO: make hyperref only use English names for TOC entries
% TODO: prevent letters in numeric fields
% WARNING: current Estonian version is Google translate. DO NOT use it right now

% Three column text in UK, EN, and ET
\newcommand\freetextcommon[3]{\begin{ukrainian}#1\end{ukrainian}\switchcolumn\begin{english}#2\end{english}\switchcolumn\begin{estonian}#3\end{estonian}}
\newcommand\freetextnoalign[3]{\freetextcommon{#1}{#2}{#3}\swtichcolumn}
\newcommand\freetext[3]{\freetextcommon{#1}{#2}{#3}\switchcolumn*}
% Same with section header
\newcommand\clause[6]{\freetext{\section{#1}#4}{\section{#2}#5}{\section{#3}#6}}
% Cute symbols
\renewcommand\thesection{§\arabic{section}}
% Hyperlinks to Appendixes and sections
\newcommand\smartref[2]{\hyperref[#1]{#2\ref{#1}}}

\begin{document}
  \begin{Form}
    \title{Угода про надання послуг / Service provision agreement / Töövõtuleping\\№ \raisebox{-6pt}{\TextField[borderwidth=0,width=250pt,charsize=14pt,name=contractno]{}}}
    % TODO: using author field for place is ugly, let's use another docuement class in future
    \author{\raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeUK]{}} / \raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeEN]{}} / \raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeET]{}}}
    \date{\today / \textenglish{\today} / \textestonian{\today}}
    \maketitle

    \begin{paracol}{3}
      \clause % TODO do we have to support people who refused an ID number btw? Add this if necessary
        {Сторони} % TODO eliminate hanging line
        {Parties}
        {}
        {\textbf{СТОРОНИ}, що уклали цю угоду є з одного боку \\\raisebox{-2pt}{\TextField[name=clientnameUK,borderwidth=0,width=250pt]{}},\\зареєстроване(-ий,-а) в\\\raisebox{-2pt}{\TextField[name=clientcountryUK,borderwidth=0,width=250pt]{}}\\із кодом (податковим номером)\\\raisebox{-2pt}{\TextField[name=clientcodeUK,borderwidth=0,width=250pt]{}}\\під адресою\\\raisebox{-2pt}{\TextField[name=clientaddr1UK,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=clientaddr2UK,borderwidth=0,width=250pt]{}}\\в особі\\\raisebox{-2pt}{\TextField[name=clientpersonUK,borderwidth=0,width=250pt]{}},\\народженого(-ої)\\\raisebox{-2pt}{\TextField[name=clientdobUK,borderwidth=0,width=250pt]{}},\\що має індивідуальний номер\\\raisebox{-2pt}{\TextField[name=clientidUK,borderwidth=0,width=250pt]{}}\\ в \\\raisebox{-2pt}{\TextField[name=clientperscountryUK,borderwidth=0,width=250pt]{}}\\та діє на підставі\\\raisebox{-2pt}{\TextField[name=clientrightUK,borderwidth=0,width=250pt]{}}\\далі позначений як \textbf{ЗАМОВНИК} та з іншого боку\\\raisebox{-2pt}{\TextField[name=contractornameUK,borderwidth=0,width=250pt]{}},\\зареєстроване(-ий,-а) в\\\raisebox{-2pt}{\TextField[name=contractorcountryUK,borderwidth=0,width=250pt]{}}\\із кодом (податковим номером)\\\raisebox{-2pt}{\TextField[name=contractorcodeUK,borderwidth=0,width=250pt]{}}\\під адресою\\\raisebox{-2pt}{\TextField[name=contractoraddr1UK,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=contractoraddr2UK,borderwidth=0,width=250pt]{}}\\в особі\\\raisebox{-2pt}{\TextField[name=contractorpersonUK,borderwidth=0,width=250pt]{}},\\народженого(-ої)\\\raisebox{-2pt}{\TextField[name=contractordobUK,borderwidth=0,width=250pt]{}},\\що має індивідуальний номер\\\raisebox{-2pt}{\TextField[name=contractoridUK,borderwidth=0,width=250pt]{}}\\ в \\\raisebox{-2pt}{\TextField[name=contractorperscountryUK,borderwidth=0,width=250pt]{}}\\та діє на підставі\\\raisebox{-2pt}{\TextField[name=contractorrightUK,borderwidth=0,width=250pt]{}}\\далі позначений як \textbf{ПІДРЯДНИК}.}
        {The agreement is established between \\\raisebox{-2pt}{\TextField[name=clientnameEN,borderwidth=0,width=250pt]{}},\\registered in\\\raisebox{-2pt}{\TextField[name=clientcountryEN,borderwidth=0,width=250pt]{}}\\with registry code (tax number) of \\\raisebox{-2pt}{\TextField[name=clientcodeEN,borderwidth=0,width=250pt]{}}\\under the following address\\\raisebox{-2pt}{\TextField[name=clientaddr1EN,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=clientaddr2EN,borderwidth=0,width=250pt]{}}\\represented by\\\raisebox{-2pt}{\TextField[name=clientpersonEN,borderwidth=0,width=250pt]{}},\\born on\\\raisebox{-2pt}{\TextField[name=clientdobEN,borderwidth=0,width=250pt]{}},\\who has a personal identification number of\\\raisebox{-2pt}{\TextField[name=clientidEN,borderwidth=0,width=250pt]{}}\\ in \\\raisebox{-2pt}{\TextField[name=clientperscountryEN,borderwidth=0,width=250pt]{}}\\and is acting on the basis of\\\raisebox{-2pt}{\TextField[name=clientrightEN,borderwidth=0,width=250pt]{}}\\later referred to as the \textbf{CLIENT} on one side and \\\raisebox{-2pt}{\TextField[name=contractornameEN,borderwidth=0,width=250pt]{}},\\registered in\\\raisebox{-2pt}{\TextField[name=contractorcountryEN,borderwidth=0,width=250pt]{}}\\with registry code (tax number) of\\\raisebox{-2pt}{\TextField[name=contractorcodeEN,borderwidth=0,width=250pt]{}}\\under the following address\\\raisebox{-2pt}{\TextField[name=contractoraddr1EN,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=contractoraddr2EN,borderwidth=0,width=250pt]{}}\\represented by\\\raisebox{-2pt}{\TextField[name=contractorpersonEN,borderwidth=0,width=250pt]{}},\\born on\\\raisebox{-2pt}{\TextField[name=contractordobEN,borderwidth=0,width=250pt]{}},\\who has a personal identification number of\\\raisebox{-2pt}{\TextField[name=contractoridEN,borderwidth=0,width=250pt]{}}\\ in \\\raisebox{-2pt}{\TextField[name=contractorperscountryEN,borderwidth=0,width=250pt]{}}\\and is acting on the basis of\\\raisebox{-2pt}{\TextField[name=contractorrightEN,borderwidth=0,width=250pt]{}}\\on another side later referred to as the \textbf{CONTRACTOR} with both collectively referred to as the \textbf{PARTIES}.}
        {}
      \clause
        {Мова та терміни договору}
        {Agreement language and terms}
        {}
        {Цю угоду укладено у трьох версіях: українською, англійською та естонською мовами. Офіційні назви сторін угоди наведені у версії, що відповідає державній мові країни, в якій відповідна сторона є резидентом, а також неофційно адаптовані у інших версіях. У разі сумнівів щодо відповідності версій, українська вважатиметься оригіналом, окрім офіційних назв сторін угоди. Виключно з метою перекладу відповідність ор\-га\-ні\-за\-цій\-но-правових форм господарювання між мовами угоди наведено у \smartref{app:correspondence}{додатку }.}
        {This agreement is concluded in three langauge versions, namely: Ukrainian, English and Estonian. The official agreement party names are provided as they are in the version corresponding to the state language of the country where the respective party is resident in and are unofficially adapted in other translations. In case of doubts concerning the conformity between the versions, the Ukrainian one shall be considered as the original, except for the official agreement party names. For the purpose of translation only the correspondence between the types of business entities in agreement's languages is provided in \smartref{app:correspondence}{appendix }.}
        {}
      \clause
        {Нерозголошення}
        {Non-disclosure}
        {}
        {\label{sec:nda}}
        {}
        {}
      \clause
        {Авторські права}
        {Copyright}
        {}
        {ПІДРЯДНИК передаватиме ЗАМОВНИКУ майнові авторські права на результати виконання послуг згідно до цієї угоди, такі як програмний код, креслення, звіти, моделі, графічні матеріали, дані досліджень, документація тощо, але не обмежуючись цим переліком. ПІДРЯДНИК втім матиме право вважатись автором цього матеріалу та використовувати його в цілях портфоліо, якщо це не суперечить \smartref{sec:nda}{}. У випадку, якщо ПІДРЯДНИК виконує послуги на користь ТРЕТЬОЇ ОСОБИ від імені ЗАМОВНИКА, домовленість ЗАМОВНИКА та ТРЕТЬОЇ ОСОБИ щодо порядку передачі авторських прав матиме приорітет над положеннями цієї угоди.}
        {The CONTRACTOR shall transfer the copyright over the results of the services provided including, but not limited to software source code, schematics, reports, models, graphical material, research data, documentation \emph{et cetera} to the CLIENT. The CONTRACTOR however shall be considered the author of the respective material and allowed to use it in the purposes of porfolio unless such act would contradcit \smartref{sec:nda}{}. In cases when the CONTRACTOR provides the services to the THIRD PARTY on the CLIENT's behalf, the agreement on copyright transfer between the THIRD PARTY and the CLIENT would take priority over the provisions of this agreement.}
        {}
    \end{paracol}
  \appendix
  \input{appendix_correspondence}
  \input{appendix_services}
  \input{appendix_bankdata}
  \end{Form}
\end{document}
