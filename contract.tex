%
% Copyright 2016 Erint Labs OÜ
%
% Licensed under the EUPL, Version 1.1 or – as soon they
% will be approved by the European Commission - subsequent
% versions of the EUPL (the "Licence");
% You may not use this work except in compliance with the
% Licence.
% You may obtain a copy of the Licence at:
%
% https://joinup.ec.europa.eu/software/page/eupl
%
% Unless required by applicable law or agreed to in
% writing, software distributed under the Licence is
% distributed on an "AS IS" basis,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
% express or implied.
% See the Licence for the specific language governing
% permissions and limitations under the Licence.
%
\documentclass[a4paper]{article}
\usepackage[landscape,top=1cm, bottom=1.5cm, left=1cm, right=1cm]{geometry}
% TODO: non XeLaTeX compliation support
\usepackage[colorlinks]{hyperref}
\usepackage{paracol}
\usepackage{fancyref}
\usepackage{fontspec}
\usepackage{xltxtra}
\usepackage{ifthen}
\usepackage{multirow}
\usepackage{xunicode}
\XeTeXinputencoding utf8
\usepackage{polyglossia}
\setdefaultlanguage{ukrainian}
\setotherlanguages{english,estonian}
\setromanfont[Mapping=tex-text]{Linux Libertine}

% TODO: remove color borders maybe?
% TODO: better document class?
% TODO: make hyperref only use English names for TOC entries
% TODO: prevent letters in numeric fields
% TODO: stylish small capitals
% WARNING: current Estonian version is Google translate. DO NOT use it right now

% Three column text in UK, EN, and ET
\newcommand\freetextcommon[3]{\begin{ukrainian}#1\end{ukrainian}\switchcolumn\begin{english}#2\end{english}\switchcolumn\begin{estonian}#3\end{estonian}}
\newcommand\freetextnoalign[3]{\freetextcommon{#1}{#2}{#3}\swtichcolumn}
\newcommand\freetext[3]{\freetextcommon{#1}{#2}{#3}\switchcolumn*}
% Same with section header
\newcommand\clause[6]{\freetext{\section{#1}#4}{\section{#2}#5}{\section{#3}#6}}
% Cute symbols
\renewcommand\thesection{§\arabic{section}}
% Hyperlinks to Appendixes and sections
\newcommand\smartref[2]{\hyperref[#1]{#2\ref{#1}}}

\begin{document}
  \begin{Form}
    \title{Угода про надання послуг / Service provision agreement / Töövõtuleping\\№ \raisebox{-6pt}{\TextField[borderwidth=0,width=250pt,charsize=14pt,name=contractno]{}}}
    % TODO: using author field for place is ugly, let's use another docuement class in future
    \author{\raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeUK]{}} / \raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeEN]{}} / \raisebox{-2pt}{\TextField[borderwidth=0,charsize=10pt,height=12pt,name=placeET]{}}}
    \date{\today / \textenglish{\today} / \textestonian{\today}}
    \maketitle

    \begin{paracol}{3}
      \clause % TODO do we have to support people who refused an ID number btw? Add this if necessary
        {СТОРОНИ УГОДИ} % TODO eliminate hanging line
        {PARTIES of AGREEMENT}
        {}
        {\textbf{СТОРОНИ}, що уклали цю \textbf{УГОДУ} є з одного боку \\\raisebox{-2pt}{\TextField[name=customernameUK,borderwidth=0,width=250pt]{}},\\зареєстроване(-ий,-а) в\\\raisebox{-2pt}{\TextField[name=customercountryUK,borderwidth=0,width=250pt]{}}\\із кодом (податковим номером)\\\raisebox{-2pt}{\TextField[name=customercodeUK,borderwidth=0,width=250pt]{}}\\під адресою\\\raisebox{-2pt}{\TextField[name=customeraddr1UK,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=customeraddr2UK,borderwidth=0,width=250pt]{}}\\в особі\\\raisebox{-2pt}{\TextField[name=customerpersonUK,borderwidth=0,width=250pt]{}},\\народженого(-ої)\\\raisebox{-2pt}{\TextField[name=customerdobUK,borderwidth=0,width=250pt]{}},\\що має індивідуальний номер\\\raisebox{-2pt}{\TextField[name=customeridUK,borderwidth=0,width=250pt]{}}\\ в \\\raisebox{-2pt}{\TextField[name=customerperscountryUK,borderwidth=0,width=250pt]{}}\\та діє на підставі\\\raisebox{-2pt}{\TextField[name=customerrightUK,borderwidth=0,width=250pt]{}}\\далі позначений як \textbf{ЗАМОВНИК} та з іншого боку\\\raisebox{-2pt}{\TextField[name=providernameUK,borderwidth=0,width=250pt]{}},\\зареєстроване(-ий,-а) в\\\raisebox{-2pt}{\TextField[name=providercountryUK,borderwidth=0,width=250pt]{}}\\із кодом (податковим номером)\\\raisebox{-2pt}{\TextField[name=providercodeUK,borderwidth=0,width=250pt]{}}\\під адресою\\\raisebox{-2pt}{\TextField[name=provideraddr1UK,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=provideraddr2UK,borderwidth=0,width=250pt]{}}\\в особі\\\raisebox{-2pt}{\TextField[name=providerpersonUK,borderwidth=0,width=250pt]{}},\\народженого(-ої)\\\raisebox{-2pt}{\TextField[name=providerdobUK,borderwidth=0,width=250pt]{}},\\що має індивідуальний номер\\\raisebox{-2pt}{\TextField[name=provideridUK,borderwidth=0,width=250pt]{}}\\ в \\\raisebox{-2pt}{\TextField[name=providerperscountryUK,borderwidth=0,width=250pt]{}}\\та діє на підставі\\\raisebox{-2pt}{\TextField[name=providerrightUK,borderwidth=0,width=250pt]{}}\\далі позначений як \textbf{ВИКОНАВЕЦЬ}.\\\textbf{ТРЕТЬОЮ ОСОБОЮ} позначено будь-яку іншу сторону, що має договірні стосунки із ЗАМОВНИКОМ, але є відмінною від ВИКОНАВЦЯ.}
        {The agreement is established between \\\raisebox{-2pt}{\TextField[name=customernameEN,borderwidth=0,width=250pt]{}},\\registered in\\\raisebox{-2pt}{\TextField[name=customercountryEN,borderwidth=0,width=250pt]{}}\\with registry code (tax number) of \\\raisebox{-2pt}{\TextField[name=customercodeEN,borderwidth=0,width=250pt]{}}\\under the following address\\\raisebox{-2pt}{\TextField[name=customeraddr1EN,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=customeraddr2EN,borderwidth=0,width=250pt]{}}\\represented by\\\raisebox{-2pt}{\TextField[name=customerpersonEN,borderwidth=0,width=250pt]{}},\\born on\\\raisebox{-2pt}{\TextField[name=customerdobEN,borderwidth=0,width=250pt]{}},\\who has a personal identification number of\\\raisebox{-2pt}{\TextField[name=customeridEN,borderwidth=0,width=250pt]{}}\\ in \\\raisebox{-2pt}{\TextField[name=customerperscountryEN,borderwidth=0,width=250pt]{}}\\and is acting on the basis of\\\raisebox{-2pt}{\TextField[name=customerrightEN,borderwidth=0,width=250pt]{}}\\later referred to as the \textbf{CUSTOMER} on one side and \\\raisebox{-2pt}{\TextField[name=providernameEN,borderwidth=0,width=250pt]{}},\\registered in\\\raisebox{-2pt}{\TextField[name=providercountryEN,borderwidth=0,width=250pt]{}}\\with registry code (tax number) of\\\raisebox{-2pt}{\TextField[name=providercodeEN,borderwidth=0,width=250pt]{}}\\under the following address\\\raisebox{-2pt}{\TextField[name=provideraddr1EN,borderwidth=0,width=250pt]{}}\\\raisebox{-2pt}{\TextField[name=provideraddr2EN,borderwidth=0,width=250pt]{}}\\represented by\\\raisebox{-2pt}{\TextField[name=providerpersonEN,borderwidth=0,width=250pt]{}},\\born on\\\raisebox{-2pt}{\TextField[name=providerdobEN,borderwidth=0,width=250pt]{}},\\who has a personal identification number of\\\raisebox{-2pt}{\TextField[name=provideridEN,borderwidth=0,width=250pt]{}}\\ in \\\raisebox{-2pt}{\TextField[name=providerperscountryEN,borderwidth=0,width=250pt]{}}\\and is acting on the basis of\\\raisebox{-2pt}{\TextField[name=providerrightEN,borderwidth=0,width=250pt]{}}\\on another side later referred to as the \textbf{PROVIDER} with both collectively referred to as the \textbf{PARTIES}.\\ Any other party distinct from the PROVIDER that is contracted by the CUSTOMER is referred to as the \textbf{THIRD PARTY}.}
        {}
      \clause
        {Мова та терміни УГОДИ}
        {AGREEMENT language and terms}
        {}
        {УГОДУ укладено у трьох версіях: українською, англійською та естонською мовами. Офіційні назви сторін УГОДИ наведені у версії, що відповідає державній мові країни, в якій відповідна сторона є резидентом, а також неофційно адаптовані у інших версіях. У разі сумнівів щодо відповідності версій, українська вважатиметься оригіналом, окрім офіційних назв СТОРІН УГОДИ. Виключно з метою перекладу відповідність ор\-га\-ні\-за\-цій\-но-правових форм господарювання між мовами УГОДУ наведено у \smartref{app:correspondence}{додатку }.}
        {This AGREEMENT is concluded in three langauge versions, namely: Ukrainian, English and Estonian. The official AGREEMENT party names are provided as they are in the version corresponding to the state language of the country where the respective party is resident in and are unofficially adapted in other translations. In case of doubts concerning the conformity between the versions, the Ukrainian one shall be considered as the original, except for the official AGREEMENT PARTIES' names. For the purpose of translation only the correspondence between the types of business entities in AGREEMENT's languages is provided in \smartref{app:correspondence}{appendix }.}
        {}
      \clause
        {Предмет УГОДИ}
        {Object of AGREEMENT}
        {}
        {СТОРОНИ домовляються про те, що ВИКОНАВЕЦЬ виконуватиме, а ЗАМОВНИК прийматиме та оплачуватиме належне виконання послуг, зазначених у \smartref{app:services}{додатку }. Послуги виконуватимуться на користь ЗАМОВНИКА безпосередьно, або на користь ТРЕТЬОЇ СТОРОНИ, із якою ЗАМОВНИК має відповідну угоду.}
        {The parties agree that the PROVIDER shall provide while the CUSTOMER shall accept and pay the diligent provision of the services indicated in \smartref{app:services}{appendix }. The services shall be provided in favour of the CUSTOMER directly or to a THIRD PARTY with which the CUSTOMER has a respective agreement.}
        {}
      \clause
        {Набуття чинності УГОДОЮ}
        {AGREEMENT's entry into force}
        {}
        {СТОРОНИ підписують УГОДУ та її похідні документи за допомогою електронно-цифрового підпису, засвідченого у відповідних країнах за умови, що такий підпис вважатиметься чинним країнами, в яких СТОРОНИ є резидентами, а також у країні, призначеній для вирішення спорів між СТОРОНАМИ щодо УГОДИ та її виконання. У разі технічної, або юридичної неможливості накласти на УГОДУ електронно-цифровий підпис, УГОДА виготовляється у паперовому форматі в двох примірниках та підписується на кожній сторінці ліворуч — ЗАМОВНИКОМ, а праворуч — ВИКОНАВЦЕМ. УГОДА набуває чинності із момента її підписання обома СТОРОНАМИ.}
        {The PARTIES sign the AGREMENT and its derivative documents by means of digital signature certified by respective countries on the condition that such a signature would be considered valid in the countries the PARTIES are resident in and in the country which is designated for dispute resolution over the AGREEMENT and its execution. In the event of technical or legal inability to apply the digital signature, the AGREEMENT shall be produced on paper in two copies and signed on each page by the CUSTOMER on the left and by the PROVIDER on the right. The AGREEMENT is considered in force after the moment both of the PARTIES sign it.}
        {}
      \clause
        {Нерозголошення}
        {Non-disclosure}
        {}
        {\label{sec:nda}}
        {}
        {}
      \clause
        {Авторські права}
        {Copyright}
        {}
        {ВИКОНАВЕЦЬ передаватиме ЗАМОВНИКУ майнові авторські права на результати виконання послуг згідно до УГОДИ, такі як програмний код, креслення, звіти, моделі, графічні матеріали, дані досліджень, документація тощо, але не обмежуючись цим переліком. ВИКОНАВЕЦЬ втім матиме право вважатись автором цього матеріалу та використовувати його в цілях портфоліо, якщо це не суперечить \smartref{sec:nda}{}. У випадку, якщо ВИКОНАВЕЦЬ виконує послуги на користь ТРЕТЬОЇ ОСОБИ від імені ЗАМОВНИКА, домовленість ЗАМОВНИКА та ТРЕТЬОЇ ОСОБИ щодо порядку передачі авторських прав матиме приорітет над положеннями цієї угоди.}
        {The PROVIDER shall transfer the copyright over the results of the services provided in the scope of AGREEMENT including, but not limited to software source code, schematics, reports, models, graphical material, research data, documentation \emph{et cetera} to the CUSTOMER. The PROVIDER however shall be considered the author of the respective material and allowed to use it in the purposes of porfolio unless such act would contradcit \smartref{sec:nda}{}. In cases when the PROVIDER provides the services to the THIRD PARTY on the CUSTOMER's behalf, the agreement on copyright transfer between the THIRD PARTY and the CUSTOMER would take priority over the provisions of this agreement.}
        {}
    \end{paracol}
  \appendix
  \input{appendix_correspondence}
  \input{appendix_services}
  \input{appendix_bankdata}
  \end{Form}
\end{document}
